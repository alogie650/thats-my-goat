<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>That's my GOAT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .goat-gold { color: #fbbf24; }
    </style>
</head>
<body class="min-h-screen p-8">

    <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-5xl font-black mb-2 uppercase tracking-tighter">That's my <span class="goat-gold">GOAT</span></h1>
        <p class="mb-8 opacity-60">Search any active or retired player to settle the debate.</p>

        <div class="flex gap-2 mb-12">
            <input id="player-search" type="text" placeholder="Enter player name (e.g. Kobe Bryant)" 
                   class="w-full p-4 rounded-xl bg-slate-800 border border-slate-700 focus:outline-none focus:border-yellow-500 transition">
            <button onclick="findGoat()" class="bg-yellow-500 text-black font-bold px-8 rounded-xl hover:bg-yellow-400 transition">SEARCH</button>
        </div>

        <div id="loading" class="hidden italic opacity-50 mb-4 text-center">Consulting the history books...</div>

        <div id="result-area" class="hidden space-y-6">
            <div class="glass p-8 rounded-3xl text-left">
                <div class="flex justify-between items-end mb-6">
                    <div>
                        <h2 id="player-name" class="text-4xl font-bold uppercase">---</h2>
                        <p id="player-team" class="opacity-60 text-lg uppercase tracking-widest">---</p>
                    </div>
                    <div class="text-right">
                        <span class="text-xs uppercase opacity-50 block">GOAT Tier Status</span>
                        <span id="goat-badge" class="bg-yellow-500/20 text-yellow-500 px-3 py-1 rounded-full text-sm font-bold">LEGEND</span>
                    </div>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="p-4 bg-white/5 rounded-2xl"><span class="block text-xs opacity-50">CAREER PPG</span><span id="stat-ppg" class="text-2xl font-mono">--</span></div>
                    <div class="p-4 bg-white/5 rounded-2xl"><span class="block text-xs opacity-50">CAREER REB</span><span id="stat-reb" class="text-2xl font-mono">--</span></div>
                    <div class="p-4 bg-white/5 rounded-2xl"><span class="block text-xs opacity-50">CAREER AST</span><span id="stat-ast" class="text-2xl font-mono">--</span></div>
                    <div class="p-4 bg-white/5 rounded-2xl"><span class="block text-xs opacity-50">ALL-TIME RANK</span><span id="stat-rank" class="text-2xl font-mono">TOP 50</span></div>
                </div>

                <div class="border-t border-white/10 pt-6">
                    <h3 class="text-sm font-bold uppercase mb-2 goat-gold">AI Case Summary:</h3>
                    <p id="ai-summary" class="leading-relaxed opacity-80 italic">Select a player to generate their legacy report...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
const API_KEY = 'd5bf99e2-09d5-44fd-8e09-d00c9e679c6f';

// 2026 All-Time Leaders Data
const ALL_TIME_LEADERS = {
    points: ["LeBron James", "Kareem Abdul-Jabbar", "Karl Malone", "Kobe Bryant", "Michael Jordan", "Kevin Durant", "Dirk Nowitzki", "Wilt Chamberlain", "Julius Erving", "James Harden"],
    threePointers: ["Stephen Curry", "James Harden", "Ray Allen", "Klay Thompson", "Damian Lillard", "LeBron James", "Reggie Miller", "Kyle Korver", "Paul George", "Vince Carter"],
    freeThrowPct: ["Stephen Curry", "Steve Nash", "Mark Price", "Rick Barry", "Damian Lillard", "Peja Stojakovic", "Chauncey Billups", "Ray Allen", "JJ Redick", "Calvin Murphy"]
};

async function findGoat() {
    const query = document.getElementById('player-search').value;
    const loading = document.getElementById('loading');
    const resultArea = document.getElementById('result-area');
    
    if(!query) return;
    loading.classList.remove('hidden');
    resultArea.classList.add('hidden');

    try {
        // 1. Search for Player
        const playerRes = await fetch(`https://api.balldontlie.io/v1/players?search=${query}`, {
            headers: { 'Authorization': API_KEY }
        });
        const playerData = await playerRes.json();

        if (!playerData.data || playerData.data.length === 0) {
            alert("Player not found in the archives.");
            loading.classList.add('hidden');
            return;
        }

        const player = playerData.data[0];
        const fullName = `${player.first_name} ${player.last_name}`;

        // 2. Fetch Season Stats (2025-26)
        const statsRes = await fetch(`https://api.balldontlie.io/v1/season_averages?season=2025&player_ids[]=${player.id}`, {
            headers: { 'Authorization': API_KEY }
        });
        const statsData = await statsRes.json();
        const s = statsData.data[0] || { pts: 0, ast: 0, reb: 0 };

        // 3. Update UI
        document.getElementById('player-name').innerText = fullName;
        document.getElementById('player-team').innerText = player.team ? player.team.full_name : "NBA Legend";
        document.getElementById('stat-ppg').innerText = s.pts || "N/A";
        document.getElementById('stat-ast').innerText = s.ast || "N/A";
        document.getElementById('stat-reb').innerText = s.reb || "N/A";

        // 4. Calculate All-Time Rank Vibe
        let rankText = "Top 100+";
        if (ALL_TIME_LEADERS.points.includes(fullName)) rankText = "TOP 10 PTS";
        if (ALL_TIME_LEADERS.threePointers.includes(fullName)) rankText = "TOP 10 3PM";
        if (fullName === "Stephen Curry") rankText = "#1 ALL TIME";

        document.getElementById('stat-rank').innerText = rankText;

        // 5. Generate AI Summary
        generateAISummary(fullName, s);

        loading.classList.add('hidden');
        resultArea.classList.remove('hidden');

    } catch (err) {
        console.error(err);
        alert("API Error. Make sure your key is active!");
        loading.classList.add('hidden');
    }
}

function generateAISummary(name, stats) {
    let summary = "";
    if (name.includes("Curry")) {
        summary = "The greatest shooter to ever live. Changed the geometry of the game forever. Currently leading the league in 'gravity'.";
    } else if (stats.pts > 28) {
        summary = `${name} is on an absolute tear this season, putting up numbers that rival the most dominant scoring seasons in modern history.`;
    } else {
        summary = `A certified bucket. Whether it's the advanced metrics or the eye test, ${name} remains a central figure in the GOAT conversation.`;
    }
    document.getElementById('ai-summary').innerText = summary;
}
    </script>
</body>
</html>
