<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>That's my GOAT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .goat-gold { color: #fbbf24; }
    </style>
</head>
<body class="min-h-screen p-8">

    <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-5xl font-black mb-2 uppercase tracking-tighter">That's my <span class="goat-gold">GOAT</span></h1>
        <p class="mb-8 opacity-60">Search any active or retired player to settle the debate.</p>

        <div class="flex gap-2 mb-12">
            <input id="player-search" type="text" placeholder="Enter player name (e.g. Kobe Bryant)" 
                   class="w-full p-4 rounded-xl bg-slate-800 border border-slate-700 focus:outline-none focus:border-yellow-500 transition">
            <button onclick="findGoat()" class="bg-yellow-500 text-black font-bold px-8 rounded-xl hover:bg-yellow-400 transition">SEARCH</button>
        </div>

        <div id="loading" class="hidden italic opacity-50 mb-4 text-center">Consulting the history books...</div>

        <div id="result-area" class="hidden space-y-6">
            <div class="glass p-8 rounded-3xl text-left">
                <div class="flex justify-between items-end mb-6">
                    <div>
                        <h2 id="player-name" class="text-4xl font-bold uppercase">---</h2>
                        <p id="player-team" class="opacity-60 text-lg uppercase tracking-widest">---</p>
                    </div>
                    <div class="text-right">
                        <span class="text-xs uppercase opacity-50 block">GOAT Tier Status</span>
                        <span id="goat-badge" class="bg-yellow-500/20 text-yellow-500 px-3 py-1 rounded-full text-sm font-bold">LEGEND</span>
                    </div>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="p-4 bg-white/5 rounded-2xl"><span class="block text-xs opacity-50">CAREER PPG</span><span id="stat-ppg" class="text-2xl font-mono">--</span></div>
                    <div class="p-4 bg-white/5 rounded-2xl"><span class="block text-xs opacity-50">CAREER REB</span><span id="stat-reb" class="text-2xl font-mono">--</span></div>
                    <div class="p-4 bg-white/5 rounded-2xl"><span class="block text-xs opacity-50">CAREER AST</span><span id="stat-ast" class="text-2xl font-mono">--</span></div>
                    <div class="p-4 bg-white/5 rounded-2xl"><span class="block text-xs opacity-50">ALL-TIME RANK</span><span id="stat-rank" class="text-2xl font-mono">TOP 50</span></div>
                </div>

                <div class="border-t border-white/10 pt-6">
                    <h3 class="text-sm font-bold uppercase mb-2 goat-gold">AI Case Summary:</h3>
                    <p id="ai-summary" class="leading-relaxed opacity-80 italic">Select a player to generate their legacy report...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
     async function findGoat() {
    const query = document.getElementById('player-search').value;
    const loading = document.getElementById('loading');
    const resultArea = document.getElementById('result-area');
    
    if(!query) return;

    loading.classList.remove('hidden');
    resultArea.classList.add('hidden');

    try {
        // 1. Search for the player to get their ID
        const playerRes = await fetch(`https://api.balldontlie.io/v1/players?search=${query}`, {
            headers: { 'Authorization': 'd5bf99e2-09d5-44fd-8e09-d00c9e679c6f' } // Get this from balldontlie.io
        });
        const playerData = await playerRes.json();

        if (playerData.data.length === 0) {
            alert("Player not found. Are they a benchwarmer?");
            loading.classList.add('hidden');
            return;
        }

        const player = playerData.data[0];

        // 2. Get their Season Stats (2025)
        const statsRes = await fetch(`https://api.balldontlie.io/v1/season_averages?season=2025&player_ids[]=${player.id}`, {
            headers: { 'Authorization': 'YOUR_FREE_API_KEY' }
        });
        const statsData = await statsRes.json();
        const stats = statsData.data[0] || { pts: "N/A", ast: "N/A", reb: "N/A" };

        // 3. Update the UI
        document.getElementById('player-name').innerText = `${player.first_name} ${player.last_name}`;
        document.getElementById('player-team').innerText = player.team ? player.team.full_name : "Retired / Free Agent";
        document.getElementById('stat-ppg').innerText = stats.pts;
        document.getElementById('stat-ast').innerText = stats.ast;
        document.getElementById('stat-reb').innerText = stats.reb;
        
        // 4. Generate the AI Summary (The "Vibe" Logic)
        generateAISummary(player, stats);

        loading.classList.add('hidden');
        resultArea.classList.remove('hidden');

    } catch (err) {
        console.error(err);
        alert("The stat sheet is jammed. Try again.");
    }
}

function generateAISummary(player, stats) {
    let summary = "";
    if (stats.pts > 25) {
        summary = `${player.last_name} is currently a scoring machine, averaging elite numbers that place them in the top tier of active bucket-getters.`;
    } else if (player.last_name === "Jordan") {
        summary = "The standard for perfection. 6-0 in the Finals. The gravity of his legacy still defines the modern game.";
    } else {
        summary = `${player.first_name} ${player.last_name}'s impact goes beyond the box score, providing the veteran presence and tactical IQ that defines an NBA legend.`;
    }
    document.getElementById('ai-summary').innerText = summary;
}
    </script>
</body>
</html>
