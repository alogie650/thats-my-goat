<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>That's My GOAT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        :root { --team-color: #39FF14; }
        
        body { 
            background-color: #000; color: #fff; font-family: 'VT323', monospace; 
            font-size: 15px; margin: 0; text-transform: uppercase; letter-spacing: 0.1em;
            overflow: hidden;
        }

        .solid-box { background: #000; border: 2px solid #333; position: relative; }
        .dynamic-neon { color: var(--team-color); transition: all 0.4s ease; }
        .gold-glow { color: #FFD700; }
        
        #loader {
            position: absolute; width: 14px; height: 14px;
            border: 2px solid var(--team-color);
            right: 15px; top: 50%; transform: translateY(-50%);
            display: none;
        }
        .loading #loader { display: block; animation: square-cycle 0.8s infinite linear; }
        
        @keyframes square-cycle {
            0% { transform: translate(0, -50%) rotate(0deg); }
            100% { transform: translate(0, -50%) rotate(360deg); }
        }

        #player-search { caret-color: transparent; background: transparent; padding-left: 28px !important; }
        #fake-cursor { 
            position: absolute; width: 10px; height: 20px; 
            background-color: var(--team-color); animation: blink 0.6s step-end infinite; 
            pointer-events: none; top: 50%; transform: translateY(-50%); left: 14px; 
        }
        
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        
        .suggestion-item { border-bottom: 1px solid #111; cursor: pointer; transition: 0.2s; font-size: 1.1rem; padding: 10px 15px; }
        .suggestion-item:hover { background: var(--team-color); color: #000; }
        
        .stat-tag { 
            font-size: 1.2rem; border: 2px solid var(--team-color); 
            padding: 4px 12px; margin: 0 8px 8px 0; color: var(--team-color); display: inline-block; 
        }
        
        .stat-grid div { border: 1px solid rgba(255,255,255,0.1); padding: 10px; }
        .label { opacity: 0.5; font-size: 0.9rem; display: block; }
        .val { font-size: 1.4rem; font-weight: bold; }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8" onclick="document.getElementById('player-search').focus()">

    <div class="max-w-4xl mx-auto relative z-10">
        <header class="text-center mb-6">
            <h1 class="text-6xl md:text-8xl font-normal tracking-tighter">THAT'S MY <span class="dynamic-neon">GOAT</span></h1>
        </header>

        <div class="relative max-w-lg mx-auto mb-6">
            <div id="search-box" class="solid-box p-1 flex items-center border-white/20 focus-within:border-[var(--team-color)]">
                <div class="relative flex-1 flex items-center h-[40px]">
                    <input id="player-search" type="text" autocomplete="off" autofocus placeholder="COMMAND NAME..."
                           class="w-full bg-transparent text-white outline-none font-bold text-xl uppercase">
                    <div id="fake-cursor"></div>
                    <div id="loader"></div>
                </div>
            </div>
            <div id="suggestions" class="hidden absolute left-0 right-0 mt-1 solid-box z-50 bg-black max-h-[250px] overflow-y-auto"></div>
        </div>

        <div id="result-area" class="hidden opacity-0 transition-opacity duration-500">
            <div id="player-card" class="solid-box p-6 border-l-[10px] border-[var(--team-color)]">
                <div class="flex flex-col md:flex-row justify-between mb-6">
                    <div>
                        <h2 id="p-name" class="text-5xl md:text-6xl font-bold dynamic-neon leading-none"></h2>
                        <p id="p-team" class="text-xl text-white/60 mt-1"></p>
                    </div>
                    <div class="mt-4 md:mt-0 md:text-right">
                        <div class="mb-2"><span class="label">RINGS</span><span id="p-rings" class="gold-glow text-2xl"></span></div>
                        <div><span class="label">MVPS</span><span id="p-mvps" class="dynamic-neon text-2xl"></span></div>
                    </div>
                </div>

                <div class="stat-grid grid grid-cols-2 md:grid-cols-4 gap-2 mb-6">
                    <div><span class="label">HEIGHT/WT</span><span id="p-phys" class="val"></span></div>
                    <div><span class="label">POSITION</span><span id="p-pos" class="val"></span></div>
                    <div><span class="label">EXP</span><span id="p-exp" class="val"></span></div>
                    <div><span class="label">STATUS</span><span id="p-stat" class="val">ACTIVE</span></div>
                </div>

                <div class="mb-6">
                    <span class="dynamic-neon text-xl font-bold">â–¶ SCOUTING REPORT</span>
                    <div id="p-case" class="text-xl md:text-2xl italic mt-2 leading-tight text-white/90"></div>
                </div>

                <div id="p-sig" class="pt-4 border-t border-white/10"></div>
            </div>
        </div>
    </div>

    <span id="text-measurer" style="visibility: hidden; position: absolute; white-space: pre; font-family: 'VT323'; font-size: 20px;"></span>

    <script>
        const API_KEY = "d5bf99e2-09d5-44fd-8e09-d00c9e679c6f";
        const LEGENDS = [
            { first_name: "Michael", last_name: "Jordan", team: { full_name: "Chicago Bulls", abbreviation: "CHI" }, height: "6-6", weight: "216", position: "Guard", rings: 6, mvps: 5, rookie: "1984", blurb: "THE DEFINITION OF PERFECTION. 6 FINALS, 6 RINGS, 6 FINALS MVPS. NEVER REACHED A GAME 7 IN THE FINALS.", sigs: ["10X SCORING CHAMP", "9X ALL-DEFENSE"] },
            { first_name: "LeBron", last_name: "James", team: { full_name: "L.A. Lakers", abbreviation: "LAL" }, height: "6-9", weight: "250", position: "Forward", rings: 4, mvps: 4, rookie: "2003", blurb: "UNPARALLELED SUSTAINED PEAK. THE ONLY MEMBER OF THE 40K-11K-11K CLUB.", sigs: ["ALL-TIME SCORING LEADER", "20X ALL-NBA"] },
            { first_name: "Stephen", last_name: "Curry", team: { full_name: "Golden State Warriors", abbreviation: "GSW" }, height: "6-2", weight: "185", position: "Guard", rings: 4, mvps: 2, rookie: "2009", blurb: "THE GREATEST SHOOTER TO EVER LIVE. CHANGED THE GEOMETRY OF THE GAME FOREVER.", sigs: ["UNANIMOUS MVP", "4K THREE-POINTERS"] },
            { first_name: "Kobe", last_name: "Bryant", team: { full_name: "Los Angeles Lakers", abbreviation: "LAL" }, height: "6-6", weight: "212", position: "Guard", rings: 5, mvps: 1, rookie: "1996", blurb: "MAMBA MENTALITY PERSONIFIED. THE MOST SKILLED SCORER OF HIS GENERATION.", sigs: ["81-POINT GAME", "12X ALL-DEFENSE"] },
            { first_name: "Kareem", last_name: "Abdul-Jabbar", team: { full_name: "Los Angeles Lakers", abbreviation: "LAL" }, height: "7-2", weight: "225", position: "Center", rings: 6, mvps: 6, rookie: "1969", blurb: "THE MOST DECORATED RESUME IN BASKETBALL HISTORY. THE SKYHOOK REMAINS UNSTOPPABLE.", sigs: ["6X MVP", "19X ALL-STAR"] },
            { first_name: "Tim", last_name: "Duncan", team: { full_name: "San Antonio Spurs", abbreviation: "SAS" }, height: "6-11", weight: "250", position: "Forward", rings: 5, mvps: 2, rookie: "1997", blurb: "THE BIG FUNDAMENTAL. THE ANCHOR OF A 20-YEAR DYNASTY.", sigs: ["15X ALL-DEFENSE", "3X FINALS MVP"] }
        ];

        let debounceTimer, abortController;
        const input = document.getElementById('player-search');
        const suggest = document.getElementById('suggestions');

        input.addEventListener('blur', () => setTimeout(() => input.focus(), 10));
        input.addEventListener('input', () => {
            updateCursor();
            const val = input.value.trim().toLowerCase();
            if (val.length < 2) { suggest.classList.add('hidden'); return; }
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => fetchPlayers(val), 150);
        });

        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && input.value.trim() !== "") {
                const query = input.value.trim().toLowerCase();
                const legend = LEGENDS.find(p => `${p.first_name} ${p.last_name}`.toLowerCase() === query);
                if (legend) selectPlayer(legend); else fetchPlayers(query, true);
            }
        });

        async function fetchPlayers(query, force = false) {
            if (abortController) abortController.abort();
            abortController = new AbortController();
            document.getElementById('search-box').classList.add('loading');
            try {
                const res = await fetch(`https://api.balldontlie.io/nba/v1/players?search=${query}`, {
                    headers: { "Authorization": API_KEY }, signal: abortController.signal
                });
                const data = await res.json();
                const apis = data.data || [];
                if (force && apis.length > 0) selectPlayer(apis[0]);
                else renderUI(apis, query);
            } catch (e) { if (e.name !== 'AbortError') console.error(e); }
            finally { document.getElementById('search-box').classList.remove('loading'); }
        }

        function renderUI(apis, query) {
            suggest.innerHTML = '';
            const locals = LEGENDS.filter(p => `${p.first_name} ${p.last_name}`.toLowerCase().includes(query));
            const combined = [...locals, ...apis].slice(0, 8);
            if (combined.length === 0) { suggest.classList.add('hidden'); return; }
            combined.forEach(p => {
                const div = document.createElement('div');
                div.className = 'suggestion-item font-bold';
                div.innerHTML = `${p.first_name} ${p.last_name} <span class="opacity-30 ml-2">// ${p.team?.abbreviation || 'NBA'}</span>`;
                div.onclick = () => selectPlayer(p);
                suggest.appendChild(div);
            });
            suggest.classList.remove('hidden');
        }

        async function selectPlayer(p) {
            suggest.classList.add('hidden');
            input.value = ""; updateCursor();
            const colors = { 'CHI': '#CE1141', 'LAL': '#FDB927', 'GSW': '#FFC72C', 'SAS': '#C4CED4' };
            document.documentElement.style.setProperty('--team-color', colors[p.team?.abbreviation] || '#39FF14');
            
            const area = document.getElementById('result-area');
            area.classList.remove('hidden'); area.style.opacity = 1;
            
            // Populate Fields
            document.getElementById('p-rings').innerText = p.rings ? "ðŸ†".repeat(p.rings) : "N/A";
            document.getElementById('p-mvps').innerText = p.mvps ? "â˜…".repeat(p.mvps) : "N/A";
            document.getElementById('p-phys').innerText = `${p.height || '??'}/${p.weight || '??'} LBS`;
            document.getElementById('p-pos').innerText = (p.position === 'G' ? 'GUARD' : p.position === 'F' ? 'FORWARD' : p.position === 'C' ? 'CENTER' : p.position) || 'N/A';
            document.getElementById('p-exp').innerText = p.rookie ? `${p.rookie}` : "ACTIVE";
            
            document.getElementById('p-sig').innerHTML = '';
            (p.sigs || ["NBA CERTIFIED", "PRO SCOUTED"]).forEach(s => {
                document.getElementById('p-sig').innerHTML += `<span class="stat-tag">${s}</span>`;
            });

            await typeWriter(`${p.first_name} ${p.last_name}`, 'p-name', 15);
            await typeWriter(p.team?.full_name || "Free Agent", 'p-team', 10);
            
            const analysis = p.blurb || `SCOUTING REPORT: ${p.first_name} ${p.last_name} IS A ${p.position || 'N/A'} FOR THE ${p.team?.full_name}. CURRENT INTEL SUGGESTS A HIGH-VOLUME IMPACT PLAYER WITH AN ACTIVE NBA ROSTER SPOT.`;
            await typeWriter(analysis, 'p-case', 5);
        }

        function updateCursor() {
            const m = document.getElementById('text-measurer');
            m.textContent = input.value;
            document.getElementById('fake-cursor').style.left = (14 + m.offsetWidth) + "px";
        }

        async function typeWriter(text, id, speed) {
            const el = document.getElementById(id);
            el.innerText = "";
            for (const char of text) { el.innerText += char; await new Promise(r => setTimeout(r, speed)); }
        }
    </script>
</body>
</html>
